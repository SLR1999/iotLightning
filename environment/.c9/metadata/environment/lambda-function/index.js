{"filter":false,"title":"index.js","tooltip":"/lambda-function/index.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":31,"column":2},"action":"insert","lines":["var AWS = require('aws-sdk');","var iotdata = new AWS.IotData({ endpoint: 'a3crcy44jplwd-ats.iot.us-east-2.amazonaws.com' });","","exports.handler = async(event) => {","    console.log(\"Event => \" + JSON.stringify(event));","    var lightOn = true","    if(event['uv_visible'] > 700) {","        lightOn = false","    }","    console.log(lightOn)","    var msg = {","        \"state\": {","            \"desired\": {","                \"lights\": lightOn","            }","        }","    }","    var params = {","        topic: \"$aws/things/lightBulb/shadow/update\",","        payload: JSON.stringify(msg),","        qos: 0","    };","","    return iotdata.publish(params, function(err, data) {","        if (err) {","            console.log(\"ERROR => \" + JSON.stringify(err));","        }","        else {","            console.log(\"Success\");","        }","    }).promise();","};"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":16,"column":5},"end":{"row":16,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":50,"mode":"ace/mode/javascript"}},"timestamp":1604506226714,"hash":"cc35fa9425d0816f4099b2ce508ccc062b1e25b7"}